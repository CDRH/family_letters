<%# expecting variables:
  label: h5 tag value
  item: variable from controller with a "res" and "html" key
  description: often nil, sometimes displayed below preview image
  transcript: true or false to display the generated HTML
%>
<% id = item["res"]["identifier"] %>

<h5 class="lesson_item"><%= label %></h5>

<div class="row">
  <%# METADATA %>
  <div class="col-md-6">
    <ul>
      <li><strong>Title:</strong> <%= item["res"]["title"] %></li>
      <li><strong>Identifier:</strong> <%= id %></li>
      <li><strong>Date:</strong> <%= item["res"]["date_display"] %></li>
      <li><strong>Format:</strong> <%= Array(item["res"]["format"]).join(" | ") %></li>
      <!-- Not pulling from API at the moment -->
      <li><strong>Creator:</strong> N/A</li>
      <li><strong>Held by:</strong> University of Nebraska, Lincoln, Hispanic-Latina/o Heritage Collection</li>
      <li><strong><%= link_to "View All Item Information", item_path(id: item["res"]["identifier"]) %></strong></li>
    </ul>
  </div>

  <%# IMAGE PREVIEW %>
  <div class="col-md-6">
    <%= link_to item_path(id: id) do %>
      <%= image_tag iiif(item["res"]["image_id"], size: "!400,400") %>
    <% end %>
    <% if description.present? %>
      <p><%= description %></p>
    <% end %>
  </div>
</div>

<%# GENERATED HTML %>
<% if local_assigns[:transcript] && transcript %>
  <div class="row">
    <button class="btn btn-default btn-block" type="button" data-toggle="collapse" data-target="#collapse-<%= id.parameterize %>" aria-expanded="false" aria-controls="collapse-<%= id.parameterize %>">
      Item Text
    </button>
    <div class="collapse" id="collapse-<%= id.parameterize %>">
      <div class="well">
        <%= sanitize item["html"] %>
      </div>
    </div>
  </div>
<% end %>
